module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},64549,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(61464);var e=a.i(11642),f=a.i(96221),g=a.i(71987);function h({children:a}){let{user:h,loading:i}=(0,e.useAuth)(),j=(0,d.useRouter)();return((0,c.useEffect)(()=>{i||h||j.push("/login")},[h,i,j]),i)?(0,b.jsxs)("div",{className:"relative flex flex-col items-center justify-center h-screen w-screen bg-black text-white gap-6 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-radial from-red-400/20 via-red-500/5 to-transparent blur-[120px]"}),(0,b.jsx)("div",{className:"absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-red-500/15 rounded-full blur-[150px] animate-float-slow"}),(0,b.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-[500px] h-[500px] bg-red-500/15 rounded-full blur-[150px] animate-float-slower"}),(0,b.jsx)("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-red-500/10 rounded-full blur-[130px] -translate-x-1/2 -translate-y-1/2 animate-pulse-slow"}),(0,b.jsx)("div",{className:"absolute top-1/3 right-1/3 w-[300px] h-[300px] bg-red-500/8 rounded-full blur-[120px] animate-float-reverse"}),(0,b.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-[350px] h-[350px] bg-red-500/8 rounded-full blur-[140px] animate-float-diagonal"}),(0,b.jsx)("div",{className:"relative z-10",children:(0,b.jsx)(g.default,{src:"/r-logo.png",alt:"RestoRefine Logo",width:64,height:64,className:"shadow-2xl animate-bounce"})}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-black uppercase tracking-[0.4em] text-red-500",children:"RestoRefine"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{className:"text-xs font-bold italic",children:"Authenticating..."})]})]})]}):h?(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["AuthGuard",()=>h])},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},57038,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(81560),e=a.i(70106);let f=(0,e.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=a.i(41675),h=a.i(99570),i=a.i(71987);function j({quote:a,onView:c,onDelete:e}){return(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100 hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.clientLogo&&(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-slate-100 flex items-center justify-center",children:(0,b.jsx)(i.default,{src:a.clientLogo,alt:a.clientName,width:48,height:48,className:"object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-slate-900",children:a.packageName}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.clientName})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",size:"icon",onClick:()=>c(a),className:"h-9 w-9 border-slate-200 hover:bg-slate-100",children:(0,b.jsx)(f,{size:16})}),a.id&&(0,b.jsx)(h.Button,{variant:"outline",size:"icon",onClick:()=>e(a.id),className:"h-9 w-9 border-red-100 text-red-600 hover:bg-red-50",children:(0,b.jsx)(d.Trash2,{size:16})})]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2",children:a.subtitle}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[a.showVideos&&(0,b.jsxs)("span",{className:"font-medium",children:[a.videoCount," Videos"]}),a.showPhotos&&(0,b.jsxs)("span",{className:"font-medium",children:[a.photoCount," Photos"]}),(0,b.jsxs)("span",{className:"font-bold text-red-600",children:["Â£",a.price]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-100",children:[(0,b.jsx)(g.Calendar,{size:14,className:"text-slate-400"}),(0,b.jsxs)("span",{className:"text-xs text-slate-500",children:["Created ",a.createdAt?new Date(a.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Unknown"]})]})]})}var k=a.i(64549);let l=(0,e.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=a.i(96221);let n=(0,e.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var o=a.i(46842),p=a.i(23292),q=a.i(38246),r=a.i(33217),s=a.i(70025),t=a.i(37927);function u(a){return a.reduce((a,b)=>{let c=b.clientName||"Unnamed Client",d=b.createdAt?new Date(b.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"Unknown Date";return a[c]||(a[c]={}),a[c][d]||(a[c][d]=[]),a[c][d].push(b),a},{})}function v(){let a=(0,c.useRouter)(),d=(0,t.useQueryClient)(),{data:e=[],isLoading:f}=(0,r.useQuery)({queryKey:["quotes"],queryFn:async()=>{let a=await fetch("/api/quotes");if(!a.ok)throw Error("Failed to fetch quotes");return(await a.json()).quotes}}),k=b=>{a.push("/")},v=(0,s.useMutation)({mutationFn:async a=>{if(!(await fetch(`/api/quotes/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete quote");return a},onSuccess:()=>{d.invalidateQueries({queryKey:["quotes"]}),p.toast.success("Quote deleted successfully")},onError:a=>{console.error("Delete error:",a),p.toast.error("Failed to delete quote")}}),w=a=>{confirm("Are you sure you want to delete this quote?")&&v.mutate(a)};return f?(0,b.jsxs)("div",{className:"relative flex flex-col items-center justify-center h-screen w-screen bg-slate-900 text-white gap-6 overflow-hidden",children:[(0,b.jsx)("div",{className:"relative z-10",children:(0,b.jsx)(i.default,{src:"/r-logo.png",alt:"RestoRefine Logo",width:64,height:64,className:"rounded-2xl shadow-2xl animate-bounce mx-auto"})}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-black uppercase tracking-[0.4em] text-red-500",children:"RestoRefine"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{className:"text-xs font-bold italic",children:"Loading History..."})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen bg-black p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(q.default,{href:"/",children:(0,b.jsxs)(h.Button,{variant:"ghost",className:"mb-4 text-slate-400 hover:text-white",children:[(0,b.jsx)(l,{size:16,className:"mr-2"}),"Back to Dashboard"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:(0,b.jsx)(n,{className:"text-red-500",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-black text-white uppercase tracking-wider",children:"Quote History"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm font-medium",children:"View and manage all your created quotes"})]})]})]}),0===e.length?(0,b.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-3xl p-12 text-center border border-white/10",children:[(0,b.jsx)(n,{className:"mx-auto mb-4 text-slate-500",size:48}),(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No quotes yet"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:"Create your first quote to see it here"}),(0,b.jsx)(q.default,{href:"/",children:(0,b.jsx)(h.Button,{className:"bg-red-500 hover:bg-red-600 text-white font-bold",children:"Create Quote"})})]}):(0,b.jsx)("div",{className:"space-y-8",children:Object.entries(u(e)).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white/5 backdrop-blur-lg rounded-3xl p-6 border border-white/10 hover:bg-white/10 hover:border-red-500 hover:shadow-2xl hover:shadow-red-500/10 hover:-translate-y-1 transition-all duration-300 cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-500/20 flex items-center justify-center",children:(0,b.jsx)(o.User,{className:"text-red-500",size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-black text-white uppercase tracking-wide",children:a}),(0,b.jsxs)("p",{className:"text-slate-400 text-xs font-medium",children:[Object.values(c).flat().length," package",1!==Object.values(c).flat().length?"s":""]})]})]}),Object.entries(c).map(([a,c])=>(0,b.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 ml-2",children:[(0,b.jsx)(g.Calendar,{className:"text-slate-500",size:14}),(0,b.jsx)("span",{className:"text-slate-400 text-sm font-bold uppercase tracking-wider",children:a}),(0,b.jsxs)("span",{className:"text-slate-600 text-xs",children:["(",c.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ml-6",children:c.map(a=>(0,b.jsx)(j,{quote:a,onView:k,onDelete:w},a.id))})]},a))]},a))}),e.length>0&&(0,b.jsx)("div",{className:"mt-8 bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Total Quotes"}),(0,b.jsx)("div",{className:"text-white font-black text-2xl",children:e.length})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Unique Clients"}),(0,b.jsx)("div",{className:"text-white font-black text-2xl",children:Object.keys(u(e)).length})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:"This Month"}),(0,b.jsx)("div",{className:"text-white font-black text-2xl",children:e.filter(a=>{if(!a.createdAt)return!1;let b=new Date(a.createdAt),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}).length})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:"This Week"}),(0,b.jsx)("div",{className:"text-white font-black text-2xl",children:e.filter(a=>!!a.createdAt&&new Date(a.createdAt)>=new Date(new Date().getTime()-6048e5)).length})]})]})})]})})}function w(){return(0,b.jsx)(k.AuthGuard,{children:(0,b.jsx)(v,{})})}a.s(["default",()=>w],57038)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4ea68056._.js.map